<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUT Phase 2 - The Reflection</title>
    <style>
        * { box-sizing: border-box; }
        body {
            font-family: 'Courier New', monospace;
            background: #022c22; /* Dark Green bg */
            color: #10b981;
            padding: 20px;
            overflow-y: auto;
        }

        .container { max-width: 800px; margin: 0 auto; text-align: center; }

        .header {
            border-bottom: 2px solid #10b981;
            margin-bottom: 20px;
            padding-bottom: 10px;
        }

        .timer { font-size: 1.5em; color: #ef4444; margin-top: 5px; }

        .artifact-box {
            background: rgba(0,0,0,0.5);
            border: 1px dashed #fbbf24;
            padding: 20px;
            margin: 20px 0;
            color: #fbbf24;
        }

        .tool-box {
            background: #000;
            border: 2px solid #10b981;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 0 15px rgba(16, 185, 129, 0.2);
        }

        input {
            background: #111;
            border: 1px solid #333;
            color: #fff;
            padding: 10px;
            width: 80%;
            font-family: inherit;
            font-size: 1.2em;
            text-align: center;
            margin-bottom: 10px;
        }

        button {
            background: #10b981;
            color: #000;
            border: none;
            padding: 10px 20px;
            font-weight: bold;
            cursor: pointer;
            font-family: inherit;
            font-size: 1em;
        }
        button:hover { background: #34d399; }

        .mirror-display {
            font-size: 1.5em;
            letter-spacing: 2px;
            margin: 20px 0;
            min-height: 40px;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 10px #fff;
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed; inset: 0;
            background: rgba(0,0,0,0.9);
            display: flex; justify-content: center; align-items: center;
            z-index: 999;
        }
        .modal-msg {
            background: #1a1a1a;
            border: 2px solid #ef4444;
            padding: 30px;
            max-width: 500px;
            text-align: center;
            color: #fff;
            box-shadow: 0 0 30px rgba(239, 68, 68, 0.5);
        }
        .blink { animation: blink 1s infinite; }
        @keyframes blink { 50% { opacity: 0; } }

        .success-box {
            display: none;
            background: rgba(16, 185, 129, 0.2);
            border: 2px solid #10b981;
            padding: 20px;
            margin-top: 20px;
        }

        .main-close-btn {
            position: fixed;
            right: 30px;
            top: 30px;
            font-size: 40px;
            cursor: pointer;
            color: #10b981;
            background: rgba(0, 0, 0, 0.7);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #10b981;
            z-index: 1000;
            transition: all 0.3s;
        }

        .main-close-btn:hover {
            background: rgba(16, 185, 129, 0.2);
            transform: scale(1.1);
        }
    </style>
</head>
<body>






    <!-- Intro Modal -->
    <div id="introModal" class="modal-overlay">
        <div class="modal-msg">
            <h2 style="color: #ef4444;">‚ö† INCOMING MESSAGE ‚ö†</h2>
            <p style="margin: 20px 0; line-height: 1.6;">
                "‡∏™‡∏≤‡∏¢‡∏•‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡πÅ‡∏à‡πâ‡∏á‡∏ß‡πà‡∏≤‡∏£‡∏´‡∏±‡∏™‡∏ñ‡∏π‡∏Å‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô <b>NextCode</b> ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß...<br>
                ‡πÅ‡∏ï‡πà‡∏°‡∏±‡∏ô‡∏ñ‡∏π‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏´‡∏±‡∏™‡πÅ‡∏•‡∏∞ <b>'‡∏Å‡∏•‡∏±‡∏ö‡∏î‡πâ‡∏≤‡∏ô'</b> ‡∏≠‡∏¢‡∏π‡πà"<br><br>
                ‡∏à‡∏á‡πÉ‡∏ä‡πâ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠ <b>Digital Mirror</b> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πâ‡∏à‡∏£‡∏¥‡∏á!
            </p>
            <button onclick="document.getElementById('introModal').style.display='none'">‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö</button>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1>üå≤ PHASE 2: FOREST MIRROR</h1>
            <div class="timer" id="phase2-timer">00:00:00</div>
        </div>

        <div class="artifact-box">
            <p>üìÅ ARTIFICIAL CODE FOUND:</p>
            <h2 id="artifact-code" style="word-break: break-all;">NjIwMi1URVJDRVMtQk1PQi1UVVM=</h2>
            <p style="font-size: 0.8em; color: #aaa; margin-top:5px;">(Hint: Base64 Decode this first)</p>
        </div>

        <div class="tool-box">
            <h3><span onclick="activateMirror()" style="cursor: pointer;" title="???">ü™û</span> DIGITAL MIRROR DEVICE ü™û</h3>
            <p style="font-size: 0.8em; color: #888; margin-bottom: 15px;">‡∏ß‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ñ‡∏≠‡∏î‡∏£‡∏´‡∏±‡∏™‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á</p>
            
            <input type="text" id="mirror-input" placeholder="Paste Decoded Text Here...">
            <br>
            
            <!-- Mirror Puzzle Area -->
            <div style="display: flex; justify-content: center; gap: 40px; margin: 25px 0;">
                <div onclick="alert('‡∏Å‡∏£‡∏∞‡∏à‡∏Å‡∏ö‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡∏Ç‡∏∏‡πà‡∏ô‡∏°‡∏±‡∏ß... ‡∏°‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á')" style="font-size: 3.5rem; cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">ü™û</div>
                
                <div onclick="alert('‡πÅ‡∏Ñ‡πà‡∏Å‡∏£‡∏∞‡∏à‡∏Å‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤... ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô')" style="font-size: 3.5rem; cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">ü™û</div>
                
                <div onclick="alert('‡πÄ‡∏á‡∏≤‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡πÉ‡∏ô‡∏Å‡∏£‡∏∞‡∏à‡∏Å‡∏ô‡∏µ‡πâ‡∏î‡∏π‡∏ö‡∏¥‡∏î‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ß...')" style="font-size: 3.5rem; cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">ü™û</div>
            </div>
            <p style="font-size: 0.8em; color: #666; margin-bottom: 20px;">( ‡∏à‡∏á‡∏´‡∏≤‡∏Å‡∏£‡∏∞‡∏à‡∏Å‡∏ß‡∏¥‡πÄ‡∏®‡∏©‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà... )</p>

            <div class="mirror-display" id="mirror-result">
                [ WAITING FOR INPUT ]
            </div>  
        </div>

        <div style="margin-top: 40px;">
            <h3>üîê FINAL AUTHENTICATION</h3>
            <p>‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å Forest Gate</p>
            <input type="text" id="final-pass" placeholder="Enter Secret Code...">
            <button onclick="checkFinalPass()">CONFIRM</button>
        </div>

        <div id="success-area" class="success-box">
            <h2>‚úÖ ACCESS GRANTED</h2>
            <p>‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏õ‡πà‡∏≤‡∏ñ‡∏π‡∏Å‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß</p>
            <button onclick="finishLevel()" style="margin-top: 10px; background: #fff; color: #000;">‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏ï‡πà‡∏≠ (Next Level)</button>
        </div>
    </div>

    <script>
    (function() {
        // Sync Timer
        function syncPhase2Timer() {
            const timerEl = document.getElementById('phase2-timer');
            if (typeof game !== 'undefined' && game.timeLeft !== undefined) {
                const timeLeft = game.timeLeft;
                const h = Math.floor(timeLeft / 3600).toString().padStart(2, '0');
                const m = Math.floor((timeLeft % 3600) / 60).toString().padStart(2, '0');
                const s = (timeLeft % 60).toString().padStart(2, '0');
                if(timerEl) timerEl.textContent = `${h}:${m}:${s}`;
            }
        }
        
        if(window.phase2SyncInterval) clearInterval(window.phase2SyncInterval);
        window.phase2SyncInterval = setInterval(syncPhase2Timer, 1000);
        syncPhase2Timer();

        // Mirror Function Logic
        window.activateMirror = function() {
            const input = document.getElementById('mirror-input').value;
            if(!input) return;

            // Effect: Show processing
            const display = document.getElementById('mirror-result');
            display.style.color = "#fbbf24";
            display.innerText = "REFLECTING...";

            setTimeout(() => {
                // Reverse the string
                const reversed = input.split('').reverse().join('');
                display.style.color = "#fff";
                display.innerText = reversed;

                // Check if they put the exact correct Base64 decoded string
                if (reversed === "SUT-BOMB-SECRET-2026") {
                    display.style.color = "#4ade80"; // Green
                    display.innerText = "‚ú® " + reversed + " ‚ú®";
                    // Auto fill for convenience (optional, but good UX)
                    // document.getElementById('final-pass').value = reversed;
                }
            }, 800);
        }

        // Final Check
        window.checkFinalPass = function() {
            const pass = document.getElementById('final-pass').value.trim();
            if (pass === "SUT-BOMB-SECRET-2026") {
                document.getElementById('success-area').style.display = 'block';
                window.scrollTo(0, document.body.scrollHeight);
            } else {
                alert("‚ùå ACCESS DENIED: ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
            }
        }

        window.finishLevel = function() {
            if (typeof game !== 'undefined' && game.completeLevel) {
                game.completeLevel();
            }
        }
    })();
    </script>
</body>
</html>